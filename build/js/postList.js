var d=(a,e,t)=>new Promise((n,c)=>{var m=r=>{try{o(t.next(r))}catch(s){c(s)}},l=r=>{try{o(t.throw(r))}catch(s){c(s)}},o=r=>r.done?n(r.value):Promise.resolve(r.value).then(m,l);o((t=t.apply(a,e)).next())});import{renderListWithTemplate as i,fetchUrl as u}from"./utils.js";const f="https://rexfriends.herokuapp.com/getPosts";var _="//valiantwolf.github.io/Rex-Friends/build/data/dinoSquad.json";export default class p{constructor(e){this.listElement=e,this.list=""}init(){return d(this,null,function*(){this.list=yield u(_),document.getElementById("Noposts").style.display="none",this.renderList(),this.renderSidebar()})}prepareTemplate(e,t){e.querySelector(".post-card .modal").id+=t.post_id,e.querySelector(".post-card__group").textContent=t.group_name,e.querySelector(".post-card__user").textContent=t.user_name,e.querySelector(".post-card__img").src+=t.img_path,e.querySelector(".post-card__img").alt+=t.group_name,e.querySelector(".modal-content").src+=t.img_path,e.querySelector(".modal-content").alt+=t.group_name,e.querySelector(".post-card__info").textContent=t.post_content,t.favorited?t.favorited='<i class="fas fa-heart fa-2x"></i>':t.favorited='<i class="far fa-heart fa-2x"></i>',e.querySelector(".post-card__favorite").innerHTML=t.favorited;const n=e.querySelector(".post-card__comments");return this.renderComment(n,t.comments),e}prepareComment(e,t){return e.querySelector(".post-card__comment-user").textContent=t.user_name,e.querySelector(".post-card__comment-info").textContent=t.comment_content,e}renderComment(e,t){const n=document.getElementById("comment-card__template");i(n,e,t,this.prepareComment)}prepareSidebar(e,t){return e.querySelector(".sidebar__group").textContent=t.group_name,e}renderList(){this.listElement.innerHTML="";const e=document.getElementById("post-card__template");i(e,this.listElement,this.list.post,this.prepareTemplate.bind(this))}renderSidebar(){const e=document.querySelector(".sidebar-info"),t=document.getElementById("sidebar__template");i(t,e,this.list.post,this.prepareSidebar)}}
